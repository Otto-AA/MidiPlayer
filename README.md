# MidiPlayer
Providing a simple interface to read and visualize midis with javascript

## Basic Example
This example demonstrates the basic usage of MidiPlayer. You can view the complete code [here](./examples/basic.html).
```javascript
var player = new MidiPlayer();
player.addCallback('noteOn', function (event) {/* handle noteOn event */});
player.addCallback('noteOff', function (event) {/* handle noteOff event */});
player.loadFromUint8Array(uint8Midi)
    .then(function() { player.play(); });
```
# Documentation
<!-- Generated by documentation.js. Update this documentation by updating the source code. -->
### Table of Contents

-   [MidiPlayer](#midiplayer)
    -   [loadFromDataUrl](#loadfromdataurl)
    -   [loadFromUint8Array](#loadfromuint8array)
    -   [loadParsedMidi](#loadparsedmidi)
    -   [getMidiEvents](#getmidievents)
    -   [getNextEventsByTime](#getnexteventsbytime)
    -   [getPreviousEventsByTime](#getpreviouseventsbytime)
    -   [getEventsByTimeRange](#geteventsbytimerange)
    -   [play](#play)
    -   [pause](#pause)
    -   [stop](#stop)
    -   [setTime](#settime)
    -   [getCurrentTime](#getcurrenttime)
    -   [getCurrentSpeed](#getcurrentspeed)
    -   [isPlaying](#isplaying)
    -   [setSpeed](#setspeed)
    -   [addCallback](#addcallback)
    -   [triggerCallbacks](#triggercallbacks)
-   [MidiParser](#midiparser)
-   [Stream](#stream)
-   [Stream](#stream-1)
-   [MidiFile](#midifile)

## MidiPlayer

midiPlayer loads a file.mid and provides callbacks for several events

### loadFromDataUrl

loadFromDataUrl

**Parameters**

-   `midi` **[string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String)** b64 encoded midi file
-   `noteShift` **int** changes the note value of each element by n. (e.g. for a piano this should be -21) (optional, default `0`)

Returns **[Promise](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise)** resolving with an array containing the formatted events

### loadFromUint8Array

loadFromUint8Array

**Parameters**

-   `midi` **[Uint8Array](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Uint8Array)** uint8 array representing midi file
-   `noteShift` **int** changes the note value of each element by n. (e.g. for a piano this should be -21) (optional, default `0`)

Returns **[Promise](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise)** resolving with an array containing the formatted events

### loadParsedMidi

loadParsedMidi

**Parameters**

-   `events` **[array](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array)** array containing all formatted events
-   `noteShift` **int** changes the note value of each element by n. (e.g. for a piano this should be -21) (optional, default `0`)

Returns **[array](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array)** containing the formatted events

### getMidiEvents

getMidiEvents

Returns **[array](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array)** containing all loaded events

### getNextEventsByTime

getNextEventsByTime

**Parameters**

-   `miliseconds` **int** specifies the end of the time range

Returns **[array](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array)** containing all events which are in the range [currentTime <-> currentTime + miliseconds]

### getPreviousEventsByTime

getPreviousEventsByTime

**Parameters**

-   `miliseconds` **int** specifies the start of the time range

Returns **[array](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array)** containing all events which are in the range [currentTime - miliseconds <-> currentTime]

### getEventsByTimeRange

getEventsByTimeRange

**Parameters**

-   `start` **int** start of the time range in miliseconds
-   `end` **int** end of the time range in miliseconds

Returns **[array](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array)** containing all events which are in the time range

### play

start playing the parsed midi from the current time

### pause

pauses the playing at the current time

### stop

pauses the playing and sets the current time to zero

### setTime

setTime

**Parameters**

-   `miliseconds` **int** 

### getCurrentTime

getCurrentTime

Returns **int** current time in miliseconds

### getCurrentSpeed

getCurrentSpeed

Returns **int** current relative speed

### isPlaying

isPlaying

Returns **bool** 

### setSpeed

setSpeed

**Parameters**

-   `speed` **int** relative speed (1 is normal, 2 is double, 0.5 is half)

### addCallback

addCallback
Add an event listener

**Parameters**

-   `event` **[string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String)** specifies the trigger event name. Possible events are: start, finish, noteOn, noteOff
-   `callback`  

### triggerCallbacks

triggerCallbacks

**Parameters**

-   `event` **[string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String)** the eventname which will be triggered
-   `data` **any** data passed to the callbacks